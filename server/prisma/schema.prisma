generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                String        @id @default(uuid())
  username          String        @unique
  passwordHash      String
  preferredLanguage String        @default("he")
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
  antennas          Antenna[]
  calculations      Calculation[]
}

model Calculation {
  id           String   @id @default(uuid())
  userId       String
  mode         String
  txPowerWatts Float
  txGainDbi    Float
  rxGainDbi    Float
  frequencyMhz Float
  sensitivity  Float?
  distance     Float?
  resultValue  Float
  createdAt    DateTime @default(now())
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Antenna {
  id           String   @id @default(uuid())
  userId       String
  name         String
  powerWatts   Float
  gainDbi      Float
  frequencyMhz Float?
  notes        String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}
